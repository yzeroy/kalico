
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.kalico.gg/Bleeding_Edge.html">
      
      
        <link rel="prev" href="Kalico_Additions.html">
      
      
        <link rel="next" href="Config_Reference_Bleeding_Edge.html">
      
      
      <link rel="icon" href="logo/kalico-32x32.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Bleeding Edge Features Documentation - Kalico Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="_kalico/css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-3YZJ9658GV"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-3YZJ9658GV",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-3YZJ9658GV",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bleeding-edge-features-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Kalico Documentation" class="md-header__button md-logo" aria-label="Kalico Documentation" data-md-component="logo">
      
  <img src="logo/kalico-96x96.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kalico Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bleeding Edge Features Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/KalicoCrew/kalico/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    KalicoCrew/kalico
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Kalico Documentation" class="md-nav__button md-logo" aria-label="Kalico Documentation" data-md-component="logo">
      
  <img src="logo/kalico-96x96.png" alt="logo">

    </a>
    Kalico Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/KalicoCrew/kalico/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    KalicoCrew/kalico
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Features.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="FAQ.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frequently Asked Questions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/KalicoCrew/kalico/releases" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Config_Changes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Changes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Config_Reference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Kalico_Additions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kalico additions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" checked>
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bleeding Edge
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Bleeding Edge
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Bleeding Edge Features Documentation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Bleeding_Edge.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Bleeding Edge Features Documentation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#high-precision-stepping-and-new-stepcompress-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      High precision stepping and new stepcompress protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="High precision stepping and new stepcompress protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existing-step-compression-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      Existing Step Compression Mechanism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations-of-current-method" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations of Current Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-step-compression-schema" class="md-nav__link">
    <span class="md-ellipsis">
      Improved Step Compression Schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages-of-new-method" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages of New Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computational-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Computational Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-world-testing-and-results" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Testing and Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smooth-input-shapers" class="md-nav__link">
    <span class="md-ellipsis">
      Smooth Input Shapers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Smooth Input Shapers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_1" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smooth-shapers-avaliable" class="md-nav__link">
    <span class="md-ellipsis">
      Smooth shapers avaliable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-smooth-shapers" class="md-nav__link">
    <span class="md-ellipsis">
      Custom smooth shapers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-and-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration and Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extruder-pa-synchronization-with-input-shaping" class="md-nav__link">
    <span class="md-ellipsis">
      Extruder PA Synchronization with Input Shaping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extruder PA Synchronization with Input Shaping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_2" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#observations-and-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Observations and Improvements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-requirements_1" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-and-results" class="md-nav__link">
    <span class="md-ellipsis">
      Testing and Results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Recommendations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ringing-tower-test-print" class="md-nav__link">
    <span class="md-ellipsis">
      Ringing tower test print
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ringing tower test print">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_3" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitation-of-current-ringing-tower-test" class="md-nav__link">
    <span class="md-ellipsis">
      Limitation of Current Ringing Tower Test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-test-methodology-concept" class="md-nav__link">
    <span class="md-ellipsis">
      New Test Methodology Concept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-run-command" class="md-nav__link">
    <span class="md-ellipsis">
      Sample run command:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-helper-macros" class="md-nav__link">
    <span class="md-ellipsis">
      Sample helper macros
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pa-tower-test-print" class="md-nav__link">
    <span class="md-ellipsis">
      PA tower test print
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PA tower test print">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_4" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features_1" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation" class="md-nav__link">
    <span class="md-ellipsis">
      Operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages-over-other-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages Over Other Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-run-command_1" class="md-nav__link">
    <span class="md-ellipsis">
      Sample run command:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-helper-macros_1" class="md-nav__link">
    <span class="md-ellipsis">
      Sample helper macros
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nonlinear-pressure-advance" class="md-nav__link">
    <span class="md-ellipsis">
      Nonlinear Pressure Advance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nonlinear Pressure Advance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_5" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages_1" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_1" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Config_Reference_Bleeding_Edge.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration reference for Bleeding Edge features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Nonlinear_Pressure_Advance.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nonlinear Pressure Advance
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="PID.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MPC.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Predictive Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Dockable_Probe.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dockable Probe
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    G-Code Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            G-Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="G-Codes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    G-Codes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Command_Templates.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="G-Code_Shell_Command.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    G-Code Shell Command Extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Status_Reference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Status reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting up and running
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Getting up and running
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Migrating_from_Klipper.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrating from Klipper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Installation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="OctoPrint.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using OctoPrint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="TMC_Drivers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TMC drivers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Config_checks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration checks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Rotation_Distance.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rotation distance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Multi_MCU_Homing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Micro-controller Homing and Probing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8" >
        
          
          <label class="md-nav__link" for="__nav_9_8" id="__nav_9_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bed leveling, Probes and Endstops
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_8">
            <span class="md-nav__icon md-icon"></span>
            Bed leveling, Probes and Endstops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Z_Calibration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatic Z-Offset Calibration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Bed_Level.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bed leveling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Delta_Calibrate.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delta calibration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Probe_Calibrate.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Probe calibration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="BLTouch.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BL-Touch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Manual_Level.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual leveling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Bed_Mesh.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bed Mesh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Endstop_Phase.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Endstop phase
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Axis_Twist_Compensation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Axis Twist Compensation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Skew_Correction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skew correction
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_9" >
        
          
          <label class="md-nav__link" for="__nav_9_9" id="__nav_9_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tuning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_9">
            <span class="md-nav__icon md-icon"></span>
            Tuning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Measuring_Resonances.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measuring Resonances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Resonance_Compensation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resonance Compensation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Pressure_Advance.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pressure advance
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Slicers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Slicers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Slicers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slicers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Exclude_Object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exclude Objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Using_PWM_Tools.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using PWM tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Developer Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Code_Overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Kinematics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kinematics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Protocol.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protocol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="API_Server.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MCU_Commands.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MCU commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS_protocol.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CANBUS protocol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Debugging.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Benchmarks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmarks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CONTRIBUTING.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing to Kalico
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Packaging.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Packaging Kalico
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Device Specific Documents
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Device Specific Documents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Example_Configs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example configurations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="SDCard_Updates.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDCard updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="RPi_microcontroller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RPi microcontroller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Beaglebone.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beaglebone
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Bootloaders.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootloaders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Bootloader_Entry.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootloader Entry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CANBUS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS_Troubleshooting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CANBUS Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="TSL1401CL_Filament_Width_Sensor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TSL1401CL filament width sensor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Hall_Filament_Width_Sensor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hall filament width sensor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Load_Cell.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Cells
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Telemetry.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kalico Telemetry
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Contact.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Sponsors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sponsors
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#high-precision-stepping-and-new-stepcompress-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      High precision stepping and new stepcompress protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="High precision stepping and new stepcompress protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existing-step-compression-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      Existing Step Compression Mechanism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations-of-current-method" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations of Current Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-step-compression-schema" class="md-nav__link">
    <span class="md-ellipsis">
      Improved Step Compression Schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages-of-new-method" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages of New Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computational-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Computational Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-world-testing-and-results" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Testing and Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smooth-input-shapers" class="md-nav__link">
    <span class="md-ellipsis">
      Smooth Input Shapers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Smooth Input Shapers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_1" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smooth-shapers-avaliable" class="md-nav__link">
    <span class="md-ellipsis">
      Smooth shapers avaliable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-smooth-shapers" class="md-nav__link">
    <span class="md-ellipsis">
      Custom smooth shapers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-and-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration and Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extruder-pa-synchronization-with-input-shaping" class="md-nav__link">
    <span class="md-ellipsis">
      Extruder PA Synchronization with Input Shaping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extruder PA Synchronization with Input Shaping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_2" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#observations-and-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Observations and Improvements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-requirements_1" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-and-results" class="md-nav__link">
    <span class="md-ellipsis">
      Testing and Results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Recommendations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ringing-tower-test-print" class="md-nav__link">
    <span class="md-ellipsis">
      Ringing tower test print
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ringing tower test print">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_3" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitation-of-current-ringing-tower-test" class="md-nav__link">
    <span class="md-ellipsis">
      Limitation of Current Ringing Tower Test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-test-methodology-concept" class="md-nav__link">
    <span class="md-ellipsis">
      New Test Methodology Concept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-run-command" class="md-nav__link">
    <span class="md-ellipsis">
      Sample run command:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-helper-macros" class="md-nav__link">
    <span class="md-ellipsis">
      Sample helper macros
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pa-tower-test-print" class="md-nav__link">
    <span class="md-ellipsis">
      PA tower test print
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PA tower test print">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_4" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features_1" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation" class="md-nav__link">
    <span class="md-ellipsis">
      Operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages-over-other-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages Over Other Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-run-command_1" class="md-nav__link">
    <span class="md-ellipsis">
      Sample run command:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-helper-macros_1" class="md-nav__link">
    <span class="md-ellipsis">
      Sample helper macros
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nonlinear-pressure-advance" class="md-nav__link">
    <span class="md-ellipsis">
      Nonlinear Pressure Advance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nonlinear Pressure Advance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_5" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advantages_1" class="md-nav__link">
    <span class="md-ellipsis">
      Advantages:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_1" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/KalicoCrew/kalico/edit/main/docs/Bleeding_Edge.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="bleeding-edge-features-documentation">Bleeding Edge Features Documentation<a class="headerlink" href="#bleeding-edge-features-documentation" title="Permanent link">&para;</a></h1>
<p>The following are experimental features found in the bleeding edge branch of Kalico and should be used at your own caution. The support for these features is limited and your experience may vary! If you do use the features and find them useful, discover bugs, or have improvements please use the Kalico <a href="Contact.html#discord">Discord server</a> to discuss your findings.</p>
<p>Refer to the <a href="Config_Reference_Bleeding_Edge.html">Bleeding Edge Configuration Reference</a> for details on printer configurations for these features.</p>
<h2 id="high-precision-stepping-and-new-stepcompress-protocol">High precision stepping and new stepcompress protocol<a class="headerlink" href="#high-precision-stepping-and-new-stepcompress-protocol" title="Permanent link">&para;</a></h2>
<p>Reference Discussion of this feature: <a href="https://klipper.discourse.group/t/improved-stepcompress-implementation/3203">https://klipper.discourse.group/t/improved-stepcompress-implementation/3203</a></p>
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<p>The new stepcompress protocol and precision stepping feature is a proposed improvement in the control and accuracy of stepper motor movements. This feature enhances the step compression algorithm, crucial for transmitting stepper commands accurately.</p>
<h3 id="existing-step-compression-mechanism">Existing Step Compression Mechanism<a class="headerlink" href="#existing-step-compression-mechanism" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Process</strong>: Initially, an iterative solver generates step timings based on movement and kinematics. These steps are then compressed for transmission, and the MCU executes the compressed steps.</li>
<li><strong>Standard Compression:</strong> The format used for compression is step[i] = step[0] + interval _ i + add _ i * (i-1) / 2. Only interval, add, and count are transmitted, making this a lossy compression with each step falling within a specific range relative to the true step.</li>
</ul>
<h3 id="limitations-of-current-method">Limitations of Current Method<a class="headerlink" href="#limitations-of-current-method" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Systematic Artifacts:</strong> The existing method introduces systematic artifacts in acceleration profiles, particularly at junctions of different velocities.</li>
<li><strong>Approximation Limitation:</strong> The current compression effectively uses only the first term of the Taylor series expansion, leading to inaccuracies in step timings.</li>
</ul>
<h3 id="improved-step-compression-schema">Improved Step Compression Schema<a class="headerlink" href="#improved-step-compression-schema" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>New Format:</strong> The improved formula is step[i] = step[0] + (interval _ i + add _ i _ (i-1) / 2 + add2 _ i _ (i-1) _ (i-2) / 6) &gt;&gt; shift. This adds a second term to the Taylor expansion and employs fixed-point arithmetic for higher precision.</li>
<li><strong>Implementation:</strong> Implemented with a consideration for rounding and remainders, leading to a more precise match with the actual step timings.</li>
</ul>
<h3 id="advantages-of-new-method">Advantages of New Method<a class="headerlink" href="#advantages-of-new-method" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Reduced Error Margin:</strong> The new method reduces the error margin to approximately +/- 1.5% from the true step.</li>
<li><strong>Smooth Acceleration Profiles:</strong> Ensures smoother acceleration profiles, potentially making for more effective input shaping and reducing vibration artifacts.</li>
</ul>
<h3 id="computational-considerations">Computational Considerations<a class="headerlink" href="#computational-considerations" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Increased Computational Demand:</strong> The new protocol is more computationally intensive and increases the data volume transmitted to the MCU.</li>
<li><strong>Performance Impact:</strong> While performance at high speeds is maintained in most cases, there may be a slight reduction in maximum achievable speeds, especially on less powerful MCUs. This reduction is roughly estimated to be 20-40% less than the current stepcompress algorithm.</li>
<li><strong>Reccomended Hardware:</strong> RPIv4 or similar hardware that is capable of processing 1M+ steps/sec using the current stepcompress algorithm.</li>
</ul>
<h3 id="real-world-testing-and-results">Real-World Testing and Results<a class="headerlink" href="#real-world-testing-and-results" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Benchmarks and Tests:</strong> Various tests, including printing complex shapes at high speeds, were conducted to assess the practical impact of the new step compression method.</li>
<li><strong>Performance on Different Hardware:</strong> The performance impact varies based on the MCU, with minimal impact on 32-bit MCUs and more significant impact on 8-bit MCUs.</li>
<li><strong>Motor EMF Considerations:</strong> This method is likely not to provide much advantage for motors which are being operated at their top speed for a given power supply voltage. It has been demonstrated by Eddietheengineer {<a href="https://www.youtube.com/watch?v=4Z2FBA_cBoE&amp;t=1s">https://www.youtube.com/watch?v=4Z2FBA_cBoE&amp;t=1s</a>} that stepper current becomes distorted as the motor back EMF approaches PSU voltage. Accurate stepping becomes less of a concern as the stepper motor driver can no longer push current into the motor accurately.</li>
</ul>
<h2 id="smooth-input-shapers">Smooth Input Shapers<a class="headerlink" href="#smooth-input-shapers" title="Permanent link">&para;</a></h2>
<p>Reference Discussion of this feature: <a href="https://klipper.discourse.group/t/scurve-pa-branch/7621/3">https://klipper.discourse.group/t/scurve-pa-branch/7621/3</a></p>
<h3 id="overview_1">Overview<a class="headerlink" href="#overview_1" title="Permanent link">&para;</a></h3>
<p>The Smooth Input Shaper feature employs polynomial smooth functions designed to cancel vibrations at certain frequencies, similar to regular input shapers. The feature aims to provide shapers that have somewhat better overall characteristics.</p>
<h3 id="key-features">Key Features<a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Polynomial smooth functions:</strong> Unlike traditional discrete input shapers, Smooth Input Shaper uses polynomial smooth functions for more effective smoothing of the toolhead motion.</li>
<li><strong>Similar to s-curve acceleration:</strong> Offers an acceleration profile that is akin to S-curve acceleration, but with fixed timing instead of spanning the entire acceleration/deceleration phase and profile shape specifically designed to cancel the vibrations at certain frequencies.</li>
</ul>
<ul>
<li><strong>Extruder Benefits</strong>: Better performance of the extruder with pressure advance. Synchronization of the extruder with input shaping.</li>
</ul>
<ul>
<li><strong>Improved effectiveness:</strong> Generally more effective than corresponding discrete input shapers, providing slightly more smoothing.</li>
</ul>
<h3 id="smooth-shapers-avaliable">Smooth shapers avaliable<a class="headerlink" href="#smooth-shapers-avaliable" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>smooth_zv</strong> - Smooth version of zv input shaper</li>
<li><strong>smooth_mzv</strong> - Smooth version of mzv input shaper</li>
<li><strong>smooth_ei</strong> - Smooth version of ei input shaper</li>
<li><strong>smooth_2hump_ei</strong> - Smooth version of 2hump_ei input shaper</li>
<li><strong>smooth_zvd_ei</strong> - Zero Vibration Derivative - Extra-Insensitive Smooth Shaper <em>(Documentation and use cases currently limited)</em></li>
<li><strong>smooth_si</strong> - Super Insensitive Smooth Shaper <em>(Documentation and use cases currently limited)</em></li>
</ul>
<h3 id="custom-smooth-shapers">Custom smooth shapers<a class="headerlink" href="#custom-smooth-shapers" title="Permanent link">&para;</a></h3>
<ul>
<li>Custom smooth shapers can be defined and used. <em>(Documentation and use cases currently limited)</em></li>
</ul>
<h3 id="hardware-requirements">Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Computational intensity:</strong> This feature is computationally more demanding. Users should consider the capabilities of their hardware and system when implementing this feature.</li>
</ul>
<ul>
<li><strong>Minimum hardware:</strong> Raspberry Pi 3 is the minimum required hardware. It runs effectively on Ender 3 up to speeds of approximately 250 mm/sec with 127 microsteps on a Raspberry Pi 3B+.</li>
</ul>
<ul>
<li><strong>Ideal hardware:</strong> Raspberry Pi 4 or Orange Pi 4 are recommended for optimal performance.</li>
</ul>
<h3 id="configuration-and-usage">Configuration and Usage<a class="headerlink" href="#configuration-and-usage" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Configuration:</strong> Configuration is similar to regular input shapers, but with some differences in parameters.</li>
<li><strong>smoother<em>freq</em>? Parameter:</strong> This parameter doesn't correspond exactly to the current mainline Klipper input shaper settings. It represents the minimum frequency that the smoother cancels or, more precisely, the smallest frequency of the pole it cancels. This distinction is particularly relevant for smooth_ei and smooth_2hump_ei shapers.</li>
</ul>
<ul>
<li><strong>Calibration support:</strong> The scripts/calibrate_shapers.py supports the calibration and overview of available smoothers automatically with no additional user input required.</li>
</ul>
<h2 id="extruder-pa-synchronization-with-input-shaping">Extruder PA Synchronization with Input Shaping<a class="headerlink" href="#extruder-pa-synchronization-with-input-shaping" title="Permanent link">&para;</a></h2>
<p>Reference Discussion of this feature: <a href="https://klipper.discourse.group/t/extruder-pa-synchronization-with-input-shaping/3843">https://klipper.discourse.group/t/extruder-pa-synchronization-with-input-shaping/3843</a></p>
<h3 id="overview_2">Overview<a class="headerlink" href="#overview_2" title="Permanent link">&para;</a></h3>
<p>The Extruder PA Synchronization with Input Shaping feature synchronizes filament extrusion (Pressure Advance - PA) with the toolhead's motion. This synchronization aims to reduce artifacts by compensating for changes in toolhead motion, especially in scenarios where input shaping is employed to minimize vibration and ringing.</p>
<h3 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h3>
<p>Input shaping is a technique used to alter toolhead motion to reduce vibrations. While Klipper's existing pressure advance algorithm helps in synchronizing filament extrusion with toolhead motion, it is not fully aligned with the input shaping alterations. This misalignment can be particularly noticeable in scenarios where X and Y axes have different resonance frequencies, or the PA smooth time significantly deviates from the input shaper duration.</p>
<h3 id="implementation">Implementation<a class="headerlink" href="#implementation" title="Permanent link">&para;</a></h3>
<p>The feature involves:</p>
<ol>
<li>Calculating toolhead motion across X, Y, and Z axes.</li>
<li>Applying input shaping to the X and Y axes.</li>
<li>Using linearization to project this motion onto the E (extruder) axis.</li>
</ol>
<p>If the input shaper is consistent for both X and Y axes, the synchronization is precise for XY motion. In other cases, the feature provides a linear approximation over X/Y deviations, which is an improvement over the previous state.</p>
<h3 id="observations-and-improvements">Observations and Improvements<a class="headerlink" href="#observations-and-improvements" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Extrusion Moves:</strong> The implementation shows less erratic behavior in PA during extrusion moves, with fewer retractions and deretractions.</li>
<li><strong>Stable Extruder Velocity:</strong> The extruder velocity becomes more stable, reflecting the steadier toolhead velocity due to input shaping.</li>
<li><strong>Wiping Behavior:</strong> Improved wiping behavior with more consistent retraction velocity.</li>
</ul>
<h3 id="hardware-requirements_1">Hardware Requirements<a class="headerlink" href="#hardware-requirements_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Computational intensity:</strong> This feature is computationally more demanding. Users should consider the capabilities of their hardware and system when implementing this feature and monitor for any issues.</li>
</ul>
<h3 id="testing-and-results">Testing and Results<a class="headerlink" href="#testing-and-results" title="Permanent link">&para;</a></h3>
<p>The feature has been tested over several months, showing modest improvements in the quality of real prints. It is particularly effective for direct drive extruders with short filament paths. The impact on bowden extruders is expected to be neutral.</p>
<h3 id="usage-recommendations">Usage Recommendations<a class="headerlink" href="#usage-recommendations" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Retuning PA:</strong> It is advisable to retune the pressure advance settings when using this branch. Specifically, reducing the pressure_advance_smooth_time from the default 0.04 to around 0.02 or 0.01 is recommended for direct drive extruders using non-flex filaments.</li>
<li><strong>Areas to Monitor:</strong> Pay attention to areas where toolhead velocity changes, such as corners, bridges, and infill connections to perimeters, for quality improvements or degradations.</li>
</ul>
<h2 id="ringing-tower-test-print">Ringing tower test print<a class="headerlink" href="#ringing-tower-test-print" title="Permanent link">&para;</a></h2>
<p>Reference Discussion of this feature: <a href="https://klipper.discourse.group/t/alternative-ringing-tower-print-for-input-shaping-calibration/4517">https://klipper.discourse.group/t/alternative-ringing-tower-print-for-input-shaping-calibration/4517</a></p>
<h3 id="overview_3">Overview<a class="headerlink" href="#overview_3" title="Permanent link">&para;</a></h3>
<p>The new test methodology for input shaper calibration addresses a critical limitation of the existing ringing_tower test. This improvement is centered around isolating the vibrations on each axis during the calibration process, thereby providing more accurate and reliable results.</p>
<p><img alt="ringing_tower_cube" src="img/ringing_tower_cube.jpg" /></p>
<h3 id="limitation-of-current-ringing-tower-test">Limitation of Current Ringing Tower Test<a class="headerlink" href="#limitation-of-current-ringing-tower-test" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Simultaneous Axis Movement:</strong> The current ringing_tower test alters the velocity of both axes due to unavoidable diagonal moves, leading to potential interference in vibration measurements.</li>
<li><strong>Parasitic Waves:</strong> The test can produce parasitic waves, making it challenging to measure resonance frequencies accurately, especially when one axis vibrates more than the other.</li>
</ul>
<h3 id="new-test-methodology-concept">New Test Methodology Concept<a class="headerlink" href="#new-test-methodology-concept" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Isolated Axis Vibration:</strong> The new test is designed to excite vibrations on only one axis at a time, thus overcoming the interference issue.</li>
<li><strong>GCode Generation Requirement:</strong> Direct GCode generation is necessary for this test, focusing on controlled acceleration and deceleration of the axes.</li>
<li><strong>Initial Acceleration:</strong> Both axes are accelerated during a diagonal move.
  Deceleration of Tested Axis: Only the axis being tested is decelerated to a complete stop, while the other maintains its original speed.</li>
<li><strong>Embossed Axis Letters:</strong> The test includes embossed letters on the sides, indicating where measurements should be taken. These letters also serve as indicators of the smoothing magnitude post-calibration.</li>
</ul>
<h3 id="advantages">Advantages<a class="headerlink" href="#advantages" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Reliable Calibration:</strong> Allows for more reliable input shaper calibration by measuring wave distances and numbers in specific test areas.</li>
<li><strong>Versatility:</strong> Though primarily tested on Ender 3 Pro, the method is adaptable to different printer types like CoreXY or Delta.</li>
</ul>
<h3 id="considerations">Considerations<a class="headerlink" href="#considerations" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Comparison with Accelerometer Data:</strong> The results may not fully correspond with accelerometer data due to multiple resonances on each axis, but they are still effective, especially with EI input shapers.</li>
<li><strong>Confirmation of Accelerometer Calibration:</strong> This test serves as a valuable tool for confirming accelerometer-based calibration results.</li>
<li><strong>User-Specific Configuration:</strong> Users are encouraged to add their specific configurations (e.g., heating, homing, bed meshing) to the start GCode sequences.</li>
</ul>
<h3 id="sample-run-command">Sample run command:<a class="headerlink" href="#sample-run-command" title="Permanent link">&para;</a></h3>
<p>Note, it is not reccomended to run the command directly without the helper macros configured.</p>
<p><em>RUN_RINGING_TEST NOZZLE=0.4 TARGET_TEMP=210 BED_TEMP=55.</em></p>
<h3 id="sample-helper-macros">Sample helper macros<a class="headerlink" href="#sample-helper-macros" title="Permanent link">&para;</a></h3>
<p>This sample Gcode can be included in <strong>printer.cfg</strong> or s seperate <strong>*.cfg</strong> file and #included in <strong>printer.cfg</strong>. Specific start/end printing Gcode for the printer should be added to ensure it aligned with the standard printing process such as the appropriate heating, homing and bed meshing sequences and additional functions such as enabling fan, additional purge lines, pressure advance setup, or adjusting the flow rate.</p>
<div class="highlight"><pre><span></span><code>[ringing_test]

[delayed_gcode start_ringing_test]

gcode:
    {% set vars = printer[&quot;gcode_macro RUN_RINGING_TEST&quot;] %}
    # Add your start GCode here, for example:
    # G28
    # M190 S{vars.bed_temp}
    # M109 S{vars.hotend_temp}
    # M106 S255
    {% set flow_percent = vars.flow_rate|float * 100.0 %}
    {% if flow_percent &gt; 0 %}
    M221 S{flow_percent}
    {% endif %}
    {% set layer_height = vars.nozzle * 0.5 %}
    {% set first_layer_height = layer_height * 1.25 %}
    PRINT_RINGING_TOWER {vars.rawparams} LAYER_HEIGHT={layer_height} FIRST_LAYER_HEIGHT={first_layer_height} FINAL_GCODE_ID=end_ringing_test

[delayed_gcode end_ringing_test]
gcode:
    # Add your end GCode here, for example:
    # M104 S0 ; turn off temperature
    # M140 S0 ; turn off heatbed
    # M107 ; turn off fan
    # G91 ; relative positioning
    # G1 Z5 ; raise Z
    # G90 ; absolute positioning
    # G1 X0 Y200 ; present print
    # M84 ; disable steppers
    RESTORE_GCODE_STATE NAME=RINGING_TEST_STATE

[gcode_macro RUN_RINGING_TEST]
variable_bed_temp: -1
variable_hotend_temp: -1
variable_nozzle: -1
variable_flow_rate: -1
variable_rawparams: &#39;&#39;
gcode:
    # Fail early if the required parameters are not provided
    {% if params.NOZZLE is not defined %}
    {action_raise_error(&#39;NOZZLE= parameter must be provided&#39;)}
    {% endif %}
    {% if params.TARGET_TEMP is not defined %}
    {action_raise_error(&#39;TARGET_TEMP= parameter must be provided&#39;)}
    {% endif %}
    SET_GCODE_VARIABLE MACRO=RUN_RINGING_TEST VARIABLE=bed_temp VALUE={params.BED_TEMP|default(60)}
    SET_GCODE_VARIABLE MACRO=RUN_RINGING_TEST VARIABLE=hotend_temp VALUE={params.TARGET_TEMP}
    SET_GCODE_VARIABLE MACRO=RUN_RINGING_TEST VARIABLE=nozzle VALUE={params.NOZZLE}
    SET_GCODE_VARIABLE MACRO=RUN_RINGING_TEST VARIABLE=flow_rate VALUE={params.FLOW_RATE|default(-1)}
    SET_GCODE_VARIABLE MACRO=RUN_RINGING_TEST VARIABLE=rawparams VALUE=&quot;&#39;{rawparams}&#39;&quot;
    SAVE_GCODE_STATE NAME=RINGING_TEST_STATE
    UPDATE_DELAYED_GCODE ID=start_ringing_test DURATION=0.01
</code></pre></div>

<h2 id="pa-tower-test-print">PA tower test print<a class="headerlink" href="#pa-tower-test-print" title="Permanent link">&para;</a></h2>
<p>Reference Discussion of this feature: <a href="https://klipper.discourse.group/t/extruder-pa-synchronization-with-input-shaping/3843/27">https://klipper.discourse.group/t/extruder-pa-synchronization-with-input-shaping/3843/27</a></p>
<h3 id="overview_4">Overview<a class="headerlink" href="#overview_4" title="Permanent link">&para;</a></h3>
<p>The features introduces a new module for printing a Pressure Advance (PA) calibration tower directly from the firmware. This module simplifies the process of calibrating the PA settings, enhancing the precision and ease of tuning for optimal print quality.</p>
<p><img alt="pa_tower_annotated" src="img/pa_tower_annotated.jpg" /></p>
<h3 id="key-features_1">Key Features<a class="headerlink" href="#key-features_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Integrated PA Test Print:</strong> Allows users to print a PA calibration tower directly from Klipper, bypassing the need for external GCode generation.</li>
<li><strong>Configurable Parameters:</strong> Default parameters are set, but users can override these or add specifics such as NOZZLE size and TARGET_TEMP.</li>
<li><strong>Velocity Transitions:</strong> Creates several velocity transitions across the test pattern to potentiall determine different optimal PA based on these transitions.</li>
</ul>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Basic Setup:</strong> Simply adding [pa_test] in the printer configuration may suffice for standard setups.</li>
<li><strong>Customization Options:</strong> Users can override parameters in the printer.cfg file or specify them in the PRINT_PA_TOWER command, such as BRIM_WIDTH, NOZZLE, and TARGET_TEMP.</li>
<li><strong>Critical Parameters:</strong> NOZZLE size and TARGET_TEMP are essential for accurate PA testing and must be specified each time.</li>
<li><strong>Manual Positioning for Exotic Kinematics:</strong> For printers with non-standard kinematics (like polar or delta), manual specification of the tower's position and size may be necessary.</li>
</ul>
<h3 id="operation">Operation<a class="headerlink" href="#operation" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Command to Initiate Print:</strong> Use PRINT_PA_TOWER command to start printing the PA tower.</li>
<li><strong>Pre-Heating Requirement:</strong> The extruder must be pre-heated separately as PRINT_PA_TOWER does not heat the extruder. TARGET_TEMP is used for sanity checking the configured extruder temperature.</li>
<li><strong>Integration with Virtual SDCard:</strong> Modified virtual_sdcard module supports printing from sources other than the virtual SD card, allowing progress tracking and standard print control commands like PAUSE, RESUME, and CANCEL_PRINT.</li>
</ul>
<h3 id="advantages-over-other-methods">Advantages Over Other Methods<a class="headerlink" href="#advantages-over-other-methods" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Smooth Transition of PA Values:</strong> Unlike the Marlin test, which can be sensitive to first layer calibration and has limited PA value testing, the Klipper PA tower allows for a smooth transition of PA values from layer to layer.</li>
<li><strong>Direct Examination Of PA:</strong> This method directly checks velocity transitions where PA should be applied and does not mix PA with other effects, such as smoothing of corners due to input shaping. A user is not expected to and should not look at corners of the model when choosing an appropriate PA value.</li>
<li><strong>User-Friendly Calibration:</strong> This method provides a more user-friendly and less fiddly approach to fine-tuning the PA value.</li>
<li><strong>Range of Velocity Tests:</strong> Optimal PA likely varies on the acceleration and velocity. Ideal PA values are likely to be specific to these different velocity transitions.</li>
</ul>
<h3 id="sample-run-command_1">Sample run command:<a class="headerlink" href="#sample-run-command_1" title="Permanent link">&para;</a></h3>
<p>Note, it is not reccomended to run the command directly without the helper macros configured.</p>
<p><em>RUN_PA_TEST NOZZLE=0.4 TARGET_TEMP=205 BED_TEMP=55</em></p>
<h3 id="sample-helper-macros_1">Sample helper macros<a class="headerlink" href="#sample-helper-macros_1" title="Permanent link">&para;</a></h3>
<p>This sample Gcode can be included in <strong>printer.cfg</strong> or s seperate <strong>*.cfg</strong> file and #included in <strong>printer.cfg</strong>. Specific start/end printing Gcode for the printer should be added to ensure it aligned with the standard printing process such as the appropriate heating, homing and bed meshing sequences and additional functions such as enabling fan, additional purge lines, pressure advance setup, or adjusting the flow rate.</p>
<div class="highlight"><pre><span></span><code>[delayed_gcode start_pa_test]
gcode:
    {% set vars = printer[&quot;gcode_macro RUN_PA_TEST&quot;] %}
    # Add your start GCode here, for example:
    # G28
    # M190 S{vars.bed_temp}
    # M109 S{vars.hotend_temp}
    {% set flow_percent = vars.flow_rate|float * 100.0 %}
    {% if flow_percent &gt; 0 %}
        M221 S{flow_percent}
    {% endif %}
    {% set height = printer.configfile.settings.pa_test.height %}  
    {% set pavalue = vars.pa_value %}
    ; If pa_value is 0 then we test the full pa range starting from 0
    {% if  vars.pa_value == 0 %} 
        TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START=0 FACTOR=.005
    {% else %}
        ; make sure that delta and start can not be lower then 0
        {% if vars.pa_value - vars.pa_range &lt;= 0%} 
            {% set delta = vars.pa_range %}
            {% set start = 0 %}
        {% else %}
            ; calculate the pa range that we want to test
            {% set delta = (vars.pa_value + vars.pa_range)  - (vars.pa_value - vars.pa_range)  %} 
            ; calculate the pa start value
            {% set start = vars.pa_value - vars.pa_range %} 
        {% endif %}
        TUNING_TOWER COMMAND=SET_PRESSURE_ADVANCE PARAMETER=ADVANCE START={start} FACTOR={delta / height}
    {% endif %}
    ; PRINT_PA_TOWER must be the last command in the start_pa_test script:
    ; it starts a print and then immediately returns without waiting for the print to finish
    PRINT_PA_TOWER {vars.rawparams} FINAL_GCODE_ID=end_pa_test

[delayed_gcode end_pa_test]
gcode:
    # Add your end GCode here, for example:
    # M104 S0 ; turn off temperature
    # M140 S0 ; turn off heatbed
    # M107 ; turn off fan
    # G91 ; relative positioning
    # G1 Z5 ; raise Z
    # G90 ; absolute positioning
    # G1 X0 Y200 ; present print
    # M84 ; disable steppers
    RESTORE_GCODE_STATE NAME=PA_TEST_STATE

[gcode_macro RUN_PA_TEST]
variable_bed_temp: -1
variable_hotend_temp: -1
variable_pa_value: 0             # Used for further tuning of pa value. If value is not 0 than the tested pa value will only be +/- (determined by the pa_range variable) around of the pa_value variable
variable_pa_range: 0.03          # Only use if pa_value is set to heigher than 0. Used to set the +/- area around pa_value that should be tested
variable_flow_rate: -1
variable_rawparams: &#39;&#39;
gcode:
    # Fail early if the required parameters are not provided
    {% if params.NOZZLE is not defined %}
    {action_raise_error(&#39;NOZZLE= parameter must be provided&#39;)}
    {% endif %}
    {% if params.TARGET_TEMP is not defined %}
    {action_raise_error(&#39;TARGET_TEMP= parameter must be provided&#39;)}
    {% endif %}
    SET_GCODE_VARIABLE MACRO=RUN_PA_TEST VARIABLE=bed_temp VALUE={params.BED_TEMP|default(60)}
    SET_GCODE_VARIABLE MACRO=RUN_PA_TEST VARIABLE=hotend_temp VALUE={params.TARGET_TEMP}
    SET_GCODE_VARIABLE MACRO=RUN_PA_TEST VARIABLE=pa_value VALUE={params.PA_VALUE|default(0)}
    SET_GCODE_VARIABLE MACRO=RUN_PA_TEST VARIABLE=pa_range VALUE={params.PA_RANGE|default(0.01)}
    SET_GCODE_VARIABLE MACRO=RUN_PA_TEST VARIABLE=flow_rate VALUE={params.FLOW_RATE|default(-1)}
    SET_GCODE_VARIABLE MACRO=RUN_PA_TEST VARIABLE=rawparams VALUE=&quot;&#39;{rawparams}&#39;&quot;
    SAVE_GCODE_STATE NAME=PA_TEST_STATE
    UPDATE_DELAYED_GCODE ID=start_pa_test DURATION=0.01
</code></pre></div>

<h2 id="nonlinear-pressure-advance">Nonlinear Pressure Advance<a class="headerlink" href="#nonlinear-pressure-advance" title="Permanent link">&para;</a></h2>
<p>Full documentation available here: <a href="Nonlinear_Pressure_Advance.html">Nonlinear Pressure Advance</a></p>
<h3 id="overview_5">Overview<a class="headerlink" href="#overview_5" title="Permanent link">&para;</a></h3>
<p>Standard linear pressure advance sometimes cannot fully prevent bulging corners without causing thinned lines, and the best settings can vary with speed and acceleration.
This feature enables a nonlinear relation between the advance and the filament feedrate, which improves many of these aspects.</p>
<h3 id="advantages_1">Advantages:<a class="headerlink" href="#advantages_1" title="Permanent link">&para;</a></h3>
<ul>
<li>Improved print quality</li>
<li>Settings are more independent of speed and acceleration.</li>
</ul>
<h3 id="considerations_1">Considerations:<a class="headerlink" href="#considerations_1" title="Permanent link">&para;</a></h3>
<ul>
<li>The multiple interacting parameters make tuning more time-consuming.</li>
<li>For some extremely fast printers the requested extruder speed and acceleration can result in skipping.</li>
</ul>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://kalico.gg/discord" target="_blank" rel="noopener" title="Join our Discord server!" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.top", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.action.edit", "optimize"], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>